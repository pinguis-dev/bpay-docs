# エラーコード仕様（error_codes.md）

このドキュメントは、bpay のアプリケーション内で使用されるエラーコードとその意味、およびフロントエンドでの表示方針を整理したものです。

## 1. エラーコード命名規則

- アルファベット（大文字）＋アンダースコア＋説明的な名称（例：`EMAIL_ALREADY_REGISTERED`）
- HTTP ステータスコードとの対応を明示（例：`HTTP 409 Conflict`）

---

## 2. 共通エラーコード一覧

| エラーコード                | HTTPステータス | メッセージ（日本語）                                  | 使用対象         | 備考 |
|-----------------------------|-----------------|--------------------------------------------------------|------------------|------|
| `EMAIL_ALREADY_REGISTERED` | 409             | このメールアドレスはすでに登録されています。         | サインアップAPI  | ログイン画面への誘導ボタンを表示 |
| `INVALID_MAGIC_LINK`       | 400             | 認証リンクが無効か期限切れです。                      | Magic Link検証API | トークン期限切れ含む |
| `TOO_MANY_REQUESTS`        | 429             | 一時的にリクエストが制限されています。しばらくしてから再試行してください。 | 認証系API全般    | 再送制限、レート制限など |
| `MISSING_REQUIRED_FIELD`   | 400             | 必須項目が入力されていません。                        | 入力バリデーション | フィールド名は別途指定可 |
| `INTERNAL_SERVER_ERROR`    | 500             | サーバーで予期しないエラーが発生しました。             | 共通              | 問い合わせ誘導も検討 |

---

## 3. フロントエンドでの取り扱い方針

- **ユーザー向けメッセージは日本語で表示**し、曖昧・技術的すぎない文言にする
- **画面ごとに対応するエラーコードをドキュメント内で明記**（例：signup.md）
- **トースト通知／エラーバナー／モーダルなどUI設計に応じて表示方法を定義**
- **未定義エラーコードは共通ハンドラで INTERNAL_SERVER_ERROR として扱う**

---

## 4. 今後の拡張

- 利用規約未同意、サポート停止状態、SMS未達、など新たなエラーケースは随時追加
- バックエンドとのインターフェース仕様にも反映（OpenAPIなど）
