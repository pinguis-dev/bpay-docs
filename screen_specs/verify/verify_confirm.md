
# 画面仕様：本人確認 - 確認・送信（verify_confirm_screen.dart）

## 1. 概要

- ユーザーが本人確認情報を確認し、利用規約に同意したうえで送信する最終ステップ
- 入力内容の確認と編集導線の提供、送信ボタンによる KYC 完了処理を担う
- 国籍に応じたフォーム切り替えを前画面で実施済み

## 2. 主な機能

- 入力済み情報の確認表示
- 利用規約同意チェックボックス
- 本人確認情報の送信
- 戻る・編集ボタンによる前画面への遷移

## 3. UI構成

| 要素名              | 種類             | 説明                                                         |
|---------------------|------------------|--------------------------------------------------------------|
| 確認用情報表示欄      | ListView/Card     | 入力された氏名・住所・国籍・ID種類・ID番号などを表示         |
| 編集ボタン           | TextButton       | 各情報項目の右側に配置し、該当項目の入力画面へ戻れる         |
| 利用規約チェックボックス | CheckboxListTile | 利用規約に同意するチェック                                 |
| 利用規約リンク       | TextLink         | 利用規約の詳細内容を別画面または外部リンクで表示可能         |
| 送信ボタン           | ElevatedButton    | チェック完了時にアクティブ、タップで送信処理を開始           |

## 4. 遷移仕様

- 「送信」ボタン押下 → API呼び出しによる本人確認登録 → 完了画面またはhome画面へ遷移
- 利用規約未チェックの場合は送信ボタン非活性のまま
- 編集ボタン押下時は対象の入力画面に遷移し、戻っても入力内容が保持されている

## 5. テスト観点

- 入力情報が正しく一覧で表示されること
- 各情報の編集が正しく動作すること
- チェックボックスが未選択時は送信不可
- 利用規約リンクの遷移が正しいこと
- API送信後、正常に画面遷移すること

## 6. 状態管理

- verifyFormProvider：すべての入力済み項目（氏名・住所・ID種別・画像など）を保持
- submitStateProvider（想定）：送信中フラグと完了ステータスを保持

## 7. 技術仕様メモ

- 送信処理には KYC 提供ベンダーのAPI（例：TRUSTDOCKなど）を使用予定
- 送信ボタン押下時、`verifyFormProvider` のデータをJSONに整形してAPIへ送信
- エラーハンドリングは API ステータスコードに基づいて処理（例：422はバリデーションエラー表示）
- チェックボックスが未選択状態では `ElevatedButton` を `enabled: false` にする